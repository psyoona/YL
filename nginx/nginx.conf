user  nginx;
worker_processes  auto;

events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    sendfile      on;
    keepalive_timeout  65;
    client_max_body_size 50m;

    # W3C 유사 포맷 (필드 설명은 docker-compose의 헤더에서 제공)
    # 날짜/시간은 한 컬럼($time_local)에 들어가지만, #Fields는 IIS 관례로 표기
    log_format w3c '$time_local $server_addr '
                   '$request_method $http_host $uri $args '
                   '$remote_addr "$http_user_agent" '
                   '$status $body_bytes_sent $request_length '
                   '$request_time $upstream_response_time';

    # 파일로 기록 (헤더는 compose의 command에서 최초 1회 출력)
    access_log /var/log/nginx/access.log w3c;
    error_log  /var/log/nginx/error.log  warn;

    include /etc/nginx/conf.d/*.conf;
}
